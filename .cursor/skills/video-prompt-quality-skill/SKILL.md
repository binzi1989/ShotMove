---
name: video-prompt-quality-skill
description: Defines director-level, API-ready prompt standards for T2V/I2V/S2V. Use when writing or refining 文生视频用Prompt / t2v_prompt for MiniMax, 可灵, or other video APIs to improve generated video quality.
---

# 视频生成提示词质量 Skill

本 Skill 约定**文生视频/图生视频/主体参考**所用 Prompt 的写法规范，与 **script-drama-skill**、**minimax-video-skill**、**product-video-skill** 配合，用于提升成片画面质量。后端在分镜生成后会按本规范对 `t2v_prompt` 做一次 LLM 精修（见 `backend/app/services/llm.py` 的 `refine_storyboard_t2v_prompts_llm`）。

## 核心原则：内容优先，运镜为辅

**镜头表现出来的内容才是重点**，运镜/景别只是辅助。观众要有**代入感**、觉得「有戏可看」，而不是被一堆「中景固定」「缓慢推镜」的术语填满却不知道画面里到底在发生什么。每条 Prompt 应优先写清：**谁在做什么、情绪与氛围如何、画面正在发生什么**；景别与运镜放在末尾、简写即可（如「中景固定」），不喧宾夺主。

## 何时触发

- 编写或修改分镜表中的「文生视频用Prompt」「t2v_prompt」时
- 需要提升 MiniMax / 可灵 / 通义万相等 T2V/I2V/S2V 的生成质量时
- 发现成片画面空洞、与剧本不符或镜头语言不清晰时

## 通用结构（五段式）

每条 Prompt 必须包含五部分，且**具体、可执行**，禁止空洞模板：

| 部分 | 说明 | 好的例子 | 避免 |
|------|------|----------|------|
| **主体** | 谁/什么（角色、商品、主图同款）、状态或穿着 | 「拾荒车」「主图同款商品」「身穿工装的男人」 | 「人物」「某物」「主体」 |
| **场景** | 在哪里、什么时间、光线与氛围、陈设 | 「利特大陆凌晨荒原、第二个月亮接近地平线、天边鱼肚白」 | 「某地」「室内」「场景」 |
| **动作** | **（最重要）** 正在发生什么、神态与细节、情绪与代入感 | 「车身飞驰卷起烟尘、沿公路向前」「手持商品缓慢转动、突出质感」「眉头紧蹙、呼吸紧绷」 | 「做某事」「展示」「角色反应」 |
| **风格** | 光线、色调、氛围、画质感 | 「冷色调黎明氛围、略带雾霭」「自然光加柔光、电影感、画面干净」 | 「电影感」（单独无细节） |
| **镜头语言** | **（次要）** 景别 + 运镜，一笔带过即可 | 「大景固定」「近景固定」 | 大段描写运镜、喧宾夺主 |

**重点**：动作与场景要写出「画面里正在发生什么、观众能感受到什么」，才有代入感；镜头语言放在最后、简短即可。

## 短剧/剧情管线（script_drama）

- 主体：明确角色/人物，可简要点出穿着或状态。
- 若本镜有对白/旁白，可在描述末尾用一句话点出情节或情绪，便于生成一致表情。
- 禁止：表头占位（如「序号」「景别」）、极短敷衍（如「1，大景。固定。」）、与画面无关的抽象词。

### 镜头连续性（短剧 / 对话场景）

- **同一场景视作一个连续场次**：同一时间、地点、人物的连续镜头，背景、光线、服装、天气等应保持一致，不要一镜在门口、一镜突然跳到完全不同的背景。
- **机位递进而非随机跳跃**：优先用「全景 / 大中景 → 中景 → 近景 / 特写」的顺序渐进，避免从特写突然跳到远景再跳回特写；对话时多用中景 / 近景，情绪收束时再给特写。
- **保持镜头轴线与人物朝向稳定**：同一组对话镜头中，人物站位与面朝方向在相邻镜头里要一致；可写成「沿上一镜轻微推近」「对切到对方中近景」等，避免左右颠倒、空间错乱。
- **用运动衔接而不是“瞬移”**：人物入画/离画、从远到近等，优先用轻微推镜、摇镜或人物走入画面来引导；不要每一镜都当作全新构图和机位重开。
- **镜头说明里显式写“承接上一镜”**：在画面描述或镜头手法中，用「沿上一镜微推」「从孟川身侧轻摇带出绿竹入画」「再切回孟川更紧的特写」等句子，帮助保持时间和空间的连续感。

### 台词镜头与无台词镜头（紧凑度与口型）

- **有台词的镜头**：Prompt 里要写清「角色正在说话」，比如「一边说话、口型自然张合」「轻声说话、嘴型随语气微动」，让 T2V 模型更倾向于生成嘴巴在动的画面，但不要把台词文字写进 Prompt。
- **无台词镜头要非常克制**：除非是关键的建立镜、转场镜或情绪收束镜，尽量不要生成只是站着不说话、几乎无动作的镜头；能合并进前后台词镜的反应/空镜，优先合并或直接省略。
- **整体节奏更紧凑**：大部分镜头应当有对白或旁白推动剧情；允许少量无台词镜头用来「起 / 承 / 转 / 合」，但数量要少、时长要短（3–4 秒以内），避免整场戏出现太多“空镜”导致观感拖沓。

## 商品种草管线（product_video）

- 主体中**必须**出现「商品」「主图同款」等，便于与 S2V 参考图绑定；见 **video-character-consistency-skill**。
- 动作：商品如何被展示（转动/特写细节/手持出镜）、主播神态与动作，具体可执行。
- 禁止：极短敷衍、不含「商品/主图同款」的主体描述。

## 实现位置（本项目）

- **精修逻辑**：`backend/app/services/llm.py` → `refine_storyboard_t2v_prompts_llm(storyboard, pipeline, script_snippet)`。  
  在 **script_drama** 与 **product_video** Agent 生成分镜后、转成 StoryboardItem 前调用，用 Kimi 按上述规范重写每条 `t2v_prompt`。
- **使用精修结果**：`backend/app/agents/script_drama.py`、`backend/app/agents/product_video.py` 在 `has_llm()` 为真时自动走精修；视频生成阶段 `video_generation.py` 的 `_shot_prompt()` 会优先使用精修后的 `t2v_prompt`。

## 提高生成成功率（硬性规则）

- **一镜一主体、一镜一主动作**：每镜只描述一个主要主体和一个 5 秒内可完成的主要动作，避免「多人同时特写」「既 A 又 B」。
- **可视觉化**：用肢体/表情代替抽象心理（如「内心纠结」→「皱眉、沉默」）；避免难以被模型执行的复杂剧情概括。
- **禁止**：敏感词、暴力/裸露/政治、与场景自相矛盾的描述、表头或极短模板。
- **推荐**：单主体、单主动作、简洁背景、明确光源；单条 80–400 字为佳，过长可收紧为核心画面。

## Guidelines

- 描述具体可执行比「堆细节」更重要；单条建议 80–400 字，上限内保留「镜头语言」完整。
- 与 **minimax-video-skill** 配合：不同模式都用五段式，主体参考时须强调「参考图中主体在画面中保持一致」。
- 若在 Cursor 中手动编辑分镜或 Prompt，请按本 Skill 的五段式与「提高生成成功率」规则检查每条 t2v_prompt。
